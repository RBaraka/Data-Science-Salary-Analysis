<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "_server_source_1", "values": [{"company_location": "United States", "job_count": 123846, "latitude": 39.8283, "longitude": -98.5795, "onsite_percentage": 78.7421475057733, "remote_percentage": 21.21344250117081, "hybrid_percentage": 0.044409993055891994, "work_ratio": "79 | 21 | 0", "__index_level_0__": 68}, {"company_location": "Canada", "job_count": 5664, "latitude": 56.1304, "longitude": -106.3468, "onsite_percentage": 75.51200564971752, "remote_percentage": 24.081920903954803, "hybrid_percentage": 0.4060734463276836, "work_ratio": "76 | 24 | 0", "__index_level_0__": 7}, {"company_location": "United Kingdom", "job_count": 3852, "latitude": 55.3781, "longitude": -3.436, "onsite_percentage": 87.46105919003115, "remote_percentage": 11.708203530633437, "hybrid_percentage": 0.8307372793354102, "work_ratio": "87 | 12 | 1", "__index_level_0__": 67}, {"company_location": "Australia", "job_count": 542, "latitude": -25.2744, "longitude": 133.7751, "onsite_percentage": 95.20295202952029, "remote_percentage": 2.7675276752767526, "hybrid_percentage": 2.029520295202952, "work_ratio": "95 | 3 | 2", "__index_level_0__": 2}, {"company_location": "Netherlands", "job_count": 431, "latitude": 52.1326, "longitude": 5.2913, "onsite_percentage": 91.415313225058, "remote_percentage": 5.800464037122969, "hybrid_percentage": 2.784222737819025, "work_ratio": "91 | 6 | 3", "__index_level_0__": 41}, {"company_location": "Germany", "job_count": 409, "latitude": 51.1657, "longitude": 10.4515, "onsite_percentage": 74.08312958435208, "remote_percentage": 18.581907090464547, "hybrid_percentage": 7.334963325183375, "work_ratio": "74 | 19 | 7", "__index_level_0__": 19}, {"company_location": "France", "job_count": 398, "latitude": 46.2276, "longitude": 2.2137, "onsite_percentage": 79.89949748743719, "remote_percentage": 12.814070351758794, "hybrid_percentage": 7.2864321608040195, "work_ratio": "80 | 13 | 7", "__index_level_0__": 18}, {"company_location": "Lithuania", "job_count": 353, "latitude": 55.1694, "longitude": 23.8813, "onsite_percentage": 95.46742209631728, "remote_percentage": 4.53257790368272, "hybrid_percentage": 0.0, "work_ratio": "95 | 5 | 0", "__index_level_0__": 36}, {"company_location": "Austria", "job_count": 329, "latitude": 47.5162, "longitude": 14.5501, "onsite_percentage": 93.9209726443769, "remote_percentage": 4.86322188449848, "hybrid_percentage": 1.21580547112462, "work_ratio": "94 | 5 | 1", "__index_level_0__": 3}, {"company_location": "Spain", "job_count": 287, "latitude": 40.4637, "longitude": -3.7492, "onsite_percentage": 55.052264808362374, "remote_percentage": 41.81184668989547, "hybrid_percentage": 3.1358885017421603, "work_ratio": "55 | 42 | 3", "__index_level_0__": 59}, {"company_location": "Slovakia", "job_count": 224, "latitude": 48.669, "longitude": 19.699, "onsite_percentage": 100.0, "remote_percentage": 0.0, "hybrid_percentage": 0.0, "work_ratio": "100 | 0 | 0", "__index_level_0__": 55}, {"company_location": "India", "job_count": 221, "latitude": 20.5937, "longitude": 78.9629, "onsite_percentage": 53.84615384615385, "remote_percentage": 35.294117647058826, "hybrid_percentage": 10.85972850678733, "work_ratio": "54 | 35 | 11", "__index_level_0__": 24}, {"company_location": "Poland", "job_count": 158, "latitude": 51.9194, "longitude": 19.1451, "onsite_percentage": 55.06329113924051, "remote_percentage": 43.037974683544306, "hybrid_percentage": 1.89873417721519, "work_ratio": "55 | 43 | 2", "__index_level_0__": 48}, {"company_location": "Ireland", "job_count": 140, "latitude": 53.4129, "longitude": -8.2439, "onsite_percentage": 76.42857142857142, "remote_percentage": 22.142857142857142, "hybrid_percentage": 1.4285714285714286, "work_ratio": "76 | 22 | 1", "__index_level_0__": 28}, {"company_location": "Latvia", "job_count": 118, "latitude": 56.8796, "longitude": 24.6032, "onsite_percentage": 97.45762711864407, "remote_percentage": 2.5423728813559325, "hybrid_percentage": 0.0, "work_ratio": "97 | 3 | 0", "__index_level_0__": 34}, {"company_location": "Mexico", "job_count": 109, "latitude": 23.6345, "longitude": -102.5528, "onsite_percentage": 42.201834862385326, "remote_percentage": 55.96330275229357, "hybrid_percentage": 1.834862385321101, "work_ratio": "42 | 56 | 2", "__index_level_0__": 40}, {"company_location": "Brazil", "job_count": 105, "latitude": -14.235, "longitude": -51.9253, "onsite_percentage": 8.571428571428571, "remote_percentage": 90.47619047619048, "hybrid_percentage": 0.9523809523809524, "work_ratio": "9 | 90 | 1", "__index_level_0__": 5}, {"company_location": "Portugal", "job_count": 82, "latitude": 39.3999, "longitude": -8.2245, "onsite_percentage": 54.87804878048781, "remote_percentage": 37.80487804878049, "hybrid_percentage": 7.317073170731707, "work_ratio": "55 | 38 | 7", "__index_level_0__": 49}, {"company_location": "Argentina", "job_count": 80, "latitude": -38.4161, "longitude": -63.6167, "onsite_percentage": 2.5, "remote_percentage": 97.5, "hybrid_percentage": 0.0, "work_ratio": "2 | 98 | 0", "__index_level_0__": 1}, {"company_location": "Finland", "job_count": 76, "latitude": 61.9241, "longitude": 25.7482, "onsite_percentage": 88.1578947368421, "remote_percentage": 6.578947368421052, "hybrid_percentage": 5.263157894736842, "work_ratio": "88 | 7 | 5", "__index_level_0__": 17}, {"company_location": "South Africa", "job_count": 71, "latitude": -30.5595, "longitude": 22.9375, "onsite_percentage": 78.87323943661971, "remote_percentage": 19.718309859154928, "hybrid_percentage": 1.4084507042253522, "work_ratio": "79 | 20 | 1", "__index_level_0__": 57}, {"company_location": "Philippines", "job_count": 68, "latitude": 12.8797, "longitude": 121.774, "onsite_percentage": 35.294117647058826, "remote_percentage": 63.23529411764706, "hybrid_percentage": 1.4705882352941175, "work_ratio": "35 | 63 | 1", "__index_level_0__": 47}, {"company_location": "New Zealand", "job_count": 68, "latitude": -40.9006, "longitude": 174.886, "onsite_percentage": 88.23529411764706, "remote_percentage": 8.823529411764707, "hybrid_percentage": 2.941176470588235, "work_ratio": "88 | 9 | 3", "__index_level_0__": 42}, {"company_location": "Italy", "job_count": 65, "latitude": 41.8719, "longitude": 12.5674, "onsite_percentage": 49.23076923076923, "remote_percentage": 41.53846153846154, "hybrid_percentage": 9.230769230769232, "work_ratio": "49 | 42 | 9", "__index_level_0__": 30}, {"company_location": "Switzerland", "job_count": 55, "latitude": 46.8182, "longitude": 8.2275, "onsite_percentage": 81.81818181818183, "remote_percentage": 5.454545454545454, "hybrid_percentage": 12.727272727272727, "work_ratio": "82 | 5 | 13", "__index_level_0__": 61}, {"company_location": "Egypt", "job_count": 51, "latitude": 26.0975, "longitude": 30.0444, "onsite_percentage": 90.19607843137256, "remote_percentage": 9.803921568627452, "hybrid_percentage": 0.0, "work_ratio": "90 | 10 | 0", "__index_level_0__": 15}, {"company_location": "Colombia", "job_count": 45, "latitude": 4.5709, "longitude": -74.2973, "onsite_percentage": 31.11111111111111, "remote_percentage": 66.66666666666666, "hybrid_percentage": 2.2222222222222223, "work_ratio": "31 | 67 | 2", "__index_level_0__": 10}, {"company_location": "Singapore", "job_count": 38, "latitude": 1.3521, "longitude": 103.8198, "onsite_percentage": 57.89473684210527, "remote_percentage": 28.947368421052634, "hybrid_percentage": 13.157894736842104, "work_ratio": "58 | 29 | 13", "__index_level_0__": 54}, {"company_location": "Japan", "job_count": 34, "latitude": 36.2044, "longitude": 138.2529, "onsite_percentage": 64.70588235294117, "remote_percentage": 23.52941176470588, "hybrid_percentage": 11.76470588235294, "work_ratio": "65 | 24 | 12", "__index_level_0__": 31}, {"company_location": "Belgium", "job_count": 31, "latitude": 50.5039, "longitude": 4.4699, "onsite_percentage": 45.16129032258064, "remote_percentage": 38.70967741935484, "hybrid_percentage": 16.129032258064516, "work_ratio": "45 | 39 | 16", "__index_level_0__": 4}, {"company_location": "Greece", "job_count": 27, "latitude": 39.0742, "longitude": 21.8243, "onsite_percentage": 22.22222222222222, "remote_percentage": 62.96296296296296, "hybrid_percentage": 14.814814814814813, "work_ratio": "22 | 63 | 15", "__index_level_0__": 21}, {"company_location": "Turkey", "job_count": 27, "latitude": 38.9637, "longitude": 35.2433, "onsite_percentage": 55.55555555555556, "remote_percentage": 37.03703703703704, "hybrid_percentage": 7.4074074074074066, "work_ratio": "56 | 37 | 7", "__index_level_0__": 64}, {"company_location": "Estonia", "job_count": 22, "latitude": 58.5953, "longitude": 25.0136, "onsite_percentage": 81.81818181818183, "remote_percentage": 13.636363636363635, "hybrid_percentage": 4.545454545454546, "work_ratio": "82 | 14 | 5", "__index_level_0__": 16}, {"company_location": "Chile", "job_count": 22, "latitude": -35.6751, "longitude": -71.543, "onsite_percentage": 27.27272727272727, "remote_percentage": 72.72727272727273, "hybrid_percentage": 0.0, "work_ratio": "27 | 73 | 0", "__index_level_0__": 8}, {"company_location": "Ukraine", "job_count": 19, "latitude": 48.3794, "longitude": 31.1656, "onsite_percentage": 52.63157894736842, "remote_percentage": 42.10526315789473, "hybrid_percentage": 5.263157894736842, "work_ratio": "53 | 42 | 5", "__index_level_0__": 65}, {"company_location": "Malta", "job_count": 17, "latitude": 35.9375, "longitude": 14.3754, "onsite_percentage": 94.11764705882352, "remote_percentage": 0.0, "hybrid_percentage": 5.88235294117647, "work_ratio": "94 | 0 | 6", "__index_level_0__": 39}, {"company_location": "Taiwan", "job_count": 17, "latitude": 23.6978, "longitude": 120.9605, "onsite_percentage": 100.0, "remote_percentage": 0.0, "hybrid_percentage": 0.0, "work_ratio": "100 | 0 | 0", "__index_level_0__": 62}, {"company_location": "Cyprus", "job_count": 16, "latitude": 35.1264, "longitude": 33.4299, "onsite_percentage": 100.0, "remote_percentage": 0.0, "hybrid_percentage": 0.0, "work_ratio": "100 | 0 | 0", "__index_level_0__": 12}, {"company_location": "Israel", "job_count": 16, "latitude": 31.0461, "longitude": 34.8516, "onsite_percentage": 50.0, "remote_percentage": 43.75, "hybrid_percentage": 6.25, "work_ratio": "50 | 44 | 6", "__index_level_0__": 29}, {"company_location": "Sweden", "job_count": 13, "latitude": 60.1282, "longitude": 18.6435, "onsite_percentage": 46.15384615384615, "remote_percentage": 38.46153846153847, "hybrid_percentage": 15.384615384615385, "work_ratio": "46 | 38 | 15", "__index_level_0__": 60}, {"company_location": "Lebanon", "job_count": 12, "latitude": 33.8547, "longitude": 35.8623, "onsite_percentage": 100.0, "remote_percentage": 0.0, "hybrid_percentage": 0.0, "work_ratio": "100 | 0 | 0", "__index_level_0__": 35}, {"company_location": "South Korea", "job_count": 12, "latitude": 35.9078, "longitude": 127.7669, "onsite_percentage": 100.0, "remote_percentage": 0.0, "hybrid_percentage": 0.0, "work_ratio": "100 | 0 | 0", "__index_level_0__": 58}, {"company_location": "Norway", "job_count": 11, "latitude": 60.472, "longitude": 8.4689, "onsite_percentage": 45.45454545454545, "remote_percentage": 36.36363636363637, "hybrid_percentage": 18.181818181818183, "work_ratio": "45 | 36 | 18", "__index_level_0__": 44}, {"company_location": "Denmark", "job_count": 11, "latitude": 56.2639, "longitude": 9.5018, "onsite_percentage": 18.181818181818183, "remote_percentage": 54.54545454545454, "hybrid_percentage": 27.27272727272727, "work_ratio": "18 | 55 | 27", "__index_level_0__": 14}, {"company_location": "Romania", "job_count": 10, "latitude": 45.9432, "longitude": 24.9668, "onsite_percentage": 50.0, "remote_percentage": 20.0, "hybrid_percentage": 30.0, "work_ratio": "50 | 20 | 30", "__index_level_0__": 51}, {"company_location": "Nigeria", "job_count": 10, "latitude": 9.082, "longitude": 8.6753, "onsite_percentage": 30.0, "remote_percentage": 60.0, "hybrid_percentage": 10.0, "work_ratio": "30 | 60 | 10", "__index_level_0__": 43}, {"company_location": "Czechia", "job_count": 10, "latitude": 49.8175, "longitude": 15.473, "onsite_percentage": 40.0, "remote_percentage": 30.0, "hybrid_percentage": 30.0, "work_ratio": "40 | 30 | 30", "__index_level_0__": 13}, {"company_location": "Hungary", "job_count": 10, "latitude": 47.1625, "longitude": 19.5033, "onsite_percentage": 70.0, "remote_percentage": 20.0, "hybrid_percentage": 10.0, "work_ratio": "70 | 20 | 10", "__index_level_0__": 23}, {"company_location": "Slovenia", "job_count": 9, "latitude": 46.1512, "longitude": 14.9955, "onsite_percentage": 44.44444444444444, "remote_percentage": 33.33333333333333, "hybrid_percentage": 22.22222222222222, "work_ratio": "44 | 33 | 22", "__index_level_0__": 56}, {"company_location": "Russia", "job_count": 7, "latitude": 61.524, "longitude": 105.3188, "onsite_percentage": 28.57142857142857, "remote_percentage": 57.14285714285714, "hybrid_percentage": 14.285714285714285, "work_ratio": "29 | 57 | 14", "__index_level_0__": 52}, {"company_location": "Luxembourg", "job_count": 7, "latitude": 49.8153, "longitude": 6.1296, "onsite_percentage": 57.14285714285714, "remote_percentage": 28.57142857142857, "hybrid_percentage": 14.285714285714285, "work_ratio": "57 | 29 | 14", "__index_level_0__": 37}, {"company_location": "Kenya", "job_count": 7, "latitude": -0.0236, "longitude": 37.9062, "onsite_percentage": 28.57142857142857, "remote_percentage": 42.857142857142854, "hybrid_percentage": 28.57142857142857, "work_ratio": "29 | 43 | 29", "__index_level_0__": 33}, {"company_location": "Indonesia", "job_count": 6, "latitude": -0.7893, "longitude": 113.9213, "onsite_percentage": 83.33333333333334, "remote_percentage": 16.666666666666664, "hybrid_percentage": 0.0, "work_ratio": "83 | 17 | 0", "__index_level_0__": 25}, {"company_location": "United Arab Emirates", "job_count": 6, "latitude": 23.4241, "longitude": 53.8478, "onsite_percentage": 33.33333333333333, "remote_percentage": 50.0, "hybrid_percentage": 16.666666666666664, "work_ratio": "33 | 50 | 17", "__index_level_0__": 66}, {"company_location": "Jordan", "job_count": 6, "latitude": 30.5852, "longitude": 36.2384, "onsite_percentage": 100.0, "remote_percentage": 0.0, "hybrid_percentage": 0.0, "work_ratio": "100 | 0 | 0", "__index_level_0__": 32}, {"company_location": "Croatia", "job_count": 5, "latitude": 45.1, "longitude": 15.2, "onsite_percentage": 80.0, "remote_percentage": 20.0, "hybrid_percentage": 0.0, "work_ratio": "80 | 20 | 0", "__index_level_0__": 11}, {"company_location": "Bulgaria", "job_count": 5, "latitude": 42.7339, "longitude": 25.4858, "onsite_percentage": 0.0, "remote_percentage": 100.0, "hybrid_percentage": 0.0, "work_ratio": "0 | 100 | 0", "__index_level_0__": 6}, {"company_location": "Hong Kong", "job_count": 5, "latitude": 22.3193, "longitude": 114.1694, "onsite_percentage": 60.0, "remote_percentage": 40.0, "hybrid_percentage": 0.0, "work_ratio": "60 | 40 | 0", "__index_level_0__": 22}, {"company_location": "Thailand", "job_count": 4, "latitude": 15.87, "longitude": 100.9925, "onsite_percentage": 0.0, "remote_percentage": 50.0, "hybrid_percentage": 50.0, "work_ratio": "0 | 50 | 50", "__index_level_0__": 63}, {"company_location": "Algeria", "job_count": 4, "latitude": 28.0339, "longitude": 1.6596, "onsite_percentage": 25.0, "remote_percentage": 50.0, "hybrid_percentage": 25.0, "work_ratio": "25 | 50 | 25", "__index_level_0__": 0}, {"company_location": "Malaysia", "job_count": 4, "latitude": 4.2105, "longitude": 101.9758, "onsite_percentage": 75.0, "remote_percentage": 25.0, "hybrid_percentage": 0.0, "work_ratio": "75 | 25 | 0", "__index_level_0__": 38}, {"company_location": "Vietnam", "job_count": 4, "latitude": 14.0583, "longitude": 108.2772, "onsite_percentage": 0.0, "remote_percentage": 100.0, "hybrid_percentage": 0.0, "work_ratio": "0 | 100 | 0", "__index_level_0__": 69}, {"company_location": "Saudi Arabia", "job_count": 3, "latitude": 23.8859, "longitude": 45.0792, "onsite_percentage": 0.0, "remote_percentage": 66.66666666666666, "hybrid_percentage": 33.33333333333333, "work_ratio": "0 | 67 | 33", "__index_level_0__": 53}, {"company_location": "Pakistan", "job_count": 3, "latitude": 30.3753, "longitude": 69.3451, "onsite_percentage": 33.33333333333333, "remote_percentage": 33.33333333333333, "hybrid_percentage": 33.33333333333333, "work_ratio": "33 | 33 | 33", "__index_level_0__": 46}, {"company_location": "Ghana", "job_count": 3, "latitude": 7.9465, "longitude": -1.0232, "onsite_percentage": 66.66666666666666, "remote_percentage": 33.33333333333333, "hybrid_percentage": 0.0, "work_ratio": "67 | 33 | 0", "__index_level_0__": 20}, {"company_location": "Qatar", "job_count": 1, "latitude": 25.3548, "longitude": 51.1839, "onsite_percentage": 0.0, "remote_percentage": 100.0, "hybrid_percentage": 0.0, "work_ratio": "0 | 100 | 0", "__index_level_0__": 50}, {"company_location": "Oman", "job_count": 1, "latitude": 21.4735, "longitude": 55.9754, "onsite_percentage": 100.0, "remote_percentage": 0.0, "hybrid_percentage": 0.0, "work_ratio": "100 | 0 | 0", "__index_level_0__": 45}, {"company_location": "Iraq", "job_count": 1, "latitude": 33.2232, "longitude": 43.6793, "onsite_percentage": 0.0, "remote_percentage": 0.0, "hybrid_percentage": 100.0, "work_ratio": "0 | 0 | 100", "__index_level_0__": 27}, {"company_location": "Iran", "job_count": 1, "latitude": 32.4279, "longitude": 53.688, "onsite_percentage": 0.0, "remote_percentage": 100.0, "hybrid_percentage": 0.0, "work_ratio": "0 | 100 | 0", "__index_level_0__": 26}, {"company_location": "China", "job_count": 1, "latitude": 35.8617, "longitude": 104.1954, "onsite_percentage": 100.0, "remote_percentage": 0.0, "hybrid_percentage": 0.0, "work_ratio": "100 | 0 | 0", "__index_level_0__": 9}]}, {"name": "_server_source_2", "values": [{"company_location": "United States", "job_count": 123846, "latitude": 39.8283, "longitude": -98.5795, "onsite_percentage": 78.7421475057733, "remote_percentage": 21.21344250117081, "hybrid_percentage": 0.044409993055891994, "work_ratio": "79 | 21 | 0", "__index_level_0__": 68}, {"company_location": "Canada", "job_count": 5664, "latitude": 56.1304, "longitude": -106.3468, "onsite_percentage": 75.51200564971752, "remote_percentage": 24.081920903954803, "hybrid_percentage": 0.4060734463276836, "work_ratio": "76 | 24 | 0", "__index_level_0__": 7}, {"company_location": "United Kingdom", "job_count": 3852, "latitude": 55.3781, "longitude": -3.436, "onsite_percentage": 87.46105919003115, "remote_percentage": 11.708203530633437, "hybrid_percentage": 0.8307372793354102, "work_ratio": "87 | 12 | 1", "__index_level_0__": 67}, {"company_location": "Australia", "job_count": 542, "latitude": -25.2744, "longitude": 133.7751, "onsite_percentage": 95.20295202952029, "remote_percentage": 2.7675276752767526, "hybrid_percentage": 2.029520295202952, "work_ratio": "95 | 3 | 2", "__index_level_0__": 2}, {"company_location": "Netherlands", "job_count": 431, "latitude": 52.1326, "longitude": 5.2913, "onsite_percentage": 91.415313225058, "remote_percentage": 5.800464037122969, "hybrid_percentage": 2.784222737819025, "work_ratio": "91 | 6 | 3", "__index_level_0__": 41}, {"company_location": "Germany", "job_count": 409, "latitude": 51.1657, "longitude": 10.4515, "onsite_percentage": 74.08312958435208, "remote_percentage": 18.581907090464547, "hybrid_percentage": 7.334963325183375, "work_ratio": "74 | 19 | 7", "__index_level_0__": 19}, {"company_location": "France", "job_count": 398, "latitude": 46.2276, "longitude": 2.2137, "onsite_percentage": 79.89949748743719, "remote_percentage": 12.814070351758794, "hybrid_percentage": 7.2864321608040195, "work_ratio": "80 | 13 | 7", "__index_level_0__": 18}, {"company_location": "Lithuania", "job_count": 353, "latitude": 55.1694, "longitude": 23.8813, "onsite_percentage": 95.46742209631728, "remote_percentage": 4.53257790368272, "hybrid_percentage": 0.0, "work_ratio": "95 | 5 | 0", "__index_level_0__": 36}, {"company_location": "Austria", "job_count": 329, "latitude": 47.5162, "longitude": 14.5501, "onsite_percentage": 93.9209726443769, "remote_percentage": 4.86322188449848, "hybrid_percentage": 1.21580547112462, "work_ratio": "94 | 5 | 1", "__index_level_0__": 3}, {"company_location": "Spain", "job_count": 287, "latitude": 40.4637, "longitude": -3.7492, "onsite_percentage": 55.052264808362374, "remote_percentage": 41.81184668989547, "hybrid_percentage": 3.1358885017421603, "work_ratio": "55 | 42 | 3", "__index_level_0__": 59}]}, {"name": "source_0", "url": "https://cdn.jsdelivr.net/npm/vega-datasets@v1.29.0/data/world-110m.json", "format": {"type": "topojson", "feature": "countries"}}, {"name": "source_1", "source": "_server_source_1", "transform": [{"type": "geojson", "signal": "layer_1_geojson_0", "fields": ["longitude", "latitude"]}, {"type": "geopoint", "projection": "projection", "as": ["layer_1_x", "layer_1_y"], "fields": ["longitude", "latitude"]}, {"type": "project", "fields": ["company_location", "job_count", "layer_1_x", "layer_1_y", "work_ratio"]}]}, {"name": "data_0", "source": "source_1", "transform": [{"type": "filter", "expr": "isValid(datum[\"job_count\"]) && isFinite(+datum[\"job_count\"])"}, {"type": "project", "fields": ["company_location", "job_count", "layer_1_x", "layer_1_y", "work_ratio"]}]}, {"name": "source_2", "source": "_server_source_2", "transform": [{"type": "geojson", "fields": ["longitude", "latitude"], "signal": "layer_2_geojson_0"}, {"type": "geopoint", "projection": "projection", "as": ["layer_2_x", "layer_2_y"], "fields": ["longitude", "latitude"]}, {"type": "project", "fields": ["job_count", "layer_2_x", "layer_2_y"]}]}, {"name": "source_1_layer_1_color_domain_company_location", "source": "source_1", "transform": [{"type": "aggregate", "groupby": ["company_location"], "fields": ["job_count"], "ops": ["min"], "as": ["sort_field"]}, {"type": "project", "fields": ["company_location", "sort_field"]}]}], "marks": [{"type": "shape", "name": "layer_0_marks", "from": {"data": "source_0"}, "encode": {"update": {"fill": {"value": "lightsteelblue"}, "stroke": {"value": "white"}, "strokeWidth": {"value": 0.8}}}, "transform": [{"type": "geoshape", "projection": "projection"}], "style": ["geoshape"]}, {"type": "symbol", "name": "layer_1_marks", "from": {"data": "data_0"}, "encode": {"update": {"fill": {"field": "company_location", "scale": "layer_1_color"}, "x": {"field": "layer_1_x"}, "size": {"field": "job_count", "scale": "layer_1_size"}, "y": {"field": "layer_1_y"}, "tooltip": {"signal": "{\"Country\": isValid(datum[\"company_location\"]) ? datum[\"company_location\"] : \"\"+datum[\"company_location\"], \"Number of Jobs\": format(datum[\"job_count\"], \"\"), \"On-site | Remote | Hybrid %\": isValid(datum[\"work_ratio\"]) ? datum[\"work_ratio\"] : \"\"+datum[\"work_ratio\"]}"}, "shape": {"value": "circle"}, "opacity": {"value": 0.8}}}, "style": ["circle"]}, {"type": "text", "name": "layer_2_marks", "from": {"data": "source_2"}, "encode": {"update": {"y": {"field": "layer_2_y"}, "fontWeight": {"value": "bold"}, "fontSize": {"value": 8}, "x": {"field": "layer_2_x"}, "text": {"signal": "format(datum[\"job_count\"], \".0f\")"}, "fill": {"value": "black"}, "align": {"value": "center"}, "dy": {"value": -12}, "baseline": {"value": "middle"}}}, "style": ["text"]}], "scales": [{"name": "layer_1_color", "type": "ordinal", "domain": {"data": "source_1_layer_1_color_domain_company_location", "field": "company_location", "sort": {"op": "max", "field": "sort_field", "order": "descending"}}, "range": ["#d73027", "#fc8d59", "#91bfdb", "#4575b4", "#fee08b", "#d9d9d9", "#762a83", "#af8dc3", "#7fbf7b", "#1b7837", "#f46d43", "#a50026", "#313695", "#74add1", "#abd9e9", "#e0f3f8", "#fdae61", "#f1b6da", "#c2a5cf", "#9970ab"]}, {"name": "layer_1_size", "type": "sqrt", "domain": {"data": "data_0", "field": "job_count"}, "range": [80, 800], "zero": true}], "projections": [{"name": "projection", "size": {"signal": "[width, height]"}, "fit": {"signal": "[data('source_0'), layer_1_geojson_0, layer_2_geojson_0]"}, "type": "equalEarth"}], "title": {"text": "Global Data Science Jobs by Country", "dy": 20, "anchor": "start", "dx": 20, "color": "black", "fontWeight": "bold", "fontSize": 18, "subtitle": "Toggle for more details"}, "legends": [{"columns": 1, "labelFontSize": 9, "labelLimit": 120, "offset": 10, "orient": "right", "title": "Country (by Job Count)", "titleFontSize": 11, "titleLimit": 150, "fill": "layer_1_color", "symbolType": "circle", "encode": {"symbols": {"update": {"opacity": {"value": 0.8}}}}}, {"direction": "horizontal", "labelFontSize": 9, "offset": 3, "orient": "bottom-left", "title": "Number of Jobs", "titleFontSize": 11, "titleLimit": 200, "size": "layer_1_size", "symbolType": "circle", "encode": {"symbols": {"update": {"fill": {"value": "black"}, "fillOpacity": {"value": 0.8}, "opacity": {"value": 0.8}, "stroke": {"value": "transparent"}}}}}], "style": "view", "width": 800, "padding": 5, "height": 450, "background": "white"};
      var embedOpt = {"mode": "vega"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>